궁금한 점

특정 도메인에 대한 서비스를 다음과 같은 이유로
도메인 객체의 상태를 변경하는 조작용 서비스와 
상태변경 없이 단순히 조회하는 조회용 서비스로 나눴습니다.

1. 화면에서 엔티티 조회 시 많은 경우 연관된 필드를 조인해서 가져와야 함 (정규화가 된 경우)
   이 때 쿼리 빌더를 이용하면 객체 그래프를 이용하는 것보다 간편함. (간접 참조 시 객체 그래프 불가능)
2. 1과 같은 이유로 엔티티와 조회 모델의 프로퍼티가 다름
3. 조회는 JPA의 1차 캐싱이 필요하지 않음
4. 조회 모델의 저장소를 교체 가능


그런데 나누고 보니 조회용 서비스도 크게 다음과 같이 나뉘는 것 같습니다.

1. 외부 요청에 의한 조회
2. 시스템 내부 협력에 필요한 조회


그래서 이걸 다음과 같이 인터페이스로 나눴습니다.

1. 외부 요청에 의한 조회 -> QueryInPort
2. 시스템 내부 협력에 의한 조회 -> QueryInSystemPort


그런데 실제 구현은 PostQueryService 하나에서 하고 싶습니다.

1. 서비스 구현체를 이 이상 나누면 너무 많을 것 같음
2. 서비스가 도메인을 감싸고 있고, 도메인을 관리하는데 필요한 인터페이스를 모두 구현.
   해당 서비스를 이용하고 싶은 클라이언트 측은 적절한 port를 이용.
3. 포트는 실제로 Interface임
4. 포트별로 프록시, 데코레이터를 이용해 접근 제어, 기능 추가 가능
   ex: 게시글을 조회하면 조회수가 올라가야 하는데 쿼리 -> 커맨드 방향으로 호출이 필요함 
   이 때 조회수 증가는 화면에서 조회할 경우에 한함(내부 요청은 증가 x). 
   화면 조회용 포트를 뚫고 조회수 증가 데코레이터를 부착해서 해결
   컨트롤러에서 조회수 증가 로직을 호출해도 되지만, 
   컨트롤러에 최대한 도메인의 요구사항을 제거하고 싶음


이렇게 될 경우 흐름 상 

1. 인터페이스를 정의
2. 인터페이스 구현

이 아니라

1. 도메인을 관리하는데 필요한 서비스를 정의
2. 특정 클라이언트에게 필요한 메서드로만 인터페이스를 구성
3. 이름을 포트라고 붙이고 클라이언트에게 제공

의 흐름이 되는 건데

좀 바보같은 생각일까요?

